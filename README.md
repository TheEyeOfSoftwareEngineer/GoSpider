# GoSpider
## 项目结构
### 单任务爬虫架构
![单任务项目架构图](https://upload.cc/i1/2021/01/04/mQWe5F.jpg)

城市列表页面作为Seed向Engine发起请求，并进入任务队列。任务队列pop任务即url，然后传入Fetcher得到对应网页的文档信息text。Engine再将text传入Parser，得到需要的items信息和对应的子任务。Engine将子任务添加进入任务队列并继续处理相应任务。
### Parser解析器
- 城市列表信息解析器
- 城市信息解析器
- 个人信息解析器

输入: utf-8编码的文本

输出: Request{URL, 对应的Parser} 列表，Item列表  

## 知识点
### 元素过滤
#### CSS选择器
`#cityList>dd>a`
#### xpath 
能力没有CSS选择器强
#### 正则表达式
```
[^>]            非右括号 对后面的元素取非
.               匹配任意字符
+               至少匹配一次
？               零次或者1次
*                零次或者多次
0-9、\d          匹配数字
[^0-9]、\D       匹配非数字
A-Za-z、\w       匹配字母
[^A-Za-z]、\W    匹配非字母
?s:             可换行
.*?             非贪婪匹配

```
##### 字符
```
一般字符	匹配自身	abc	abc
.	匹配任意除换行符"\n"外的字符， 在 DOTALL 模式中也能匹配换行符	a.c	abc
\	转义字符，使后一个字符改变原来的意思；
    如果字符串中有字符 * 需要匹配，可以使用 \* 或者字符集［*]。	a\.c
    a\\c	a.c a\c
[...]	字符集（字符类），对应的位置可以是字符集中任意字符。
        字符集中的字符可以逐个列出，也可以给出范围，如 [abc] 或 [a-c]，
        第一个字符如果是 ^ 则表示取反，如 [^abc] 表示除了abc之外的其他字符。	a[bcd]e	abe 或 ace 或 ade
\d	数字：[0-9]	a\dc	a1c
\D	非数字：[^\d]	a\Dc	abc
\s	空白字符：[<空格>\t\r\n\f\v]	a\sc	a c
\S	非空白字符：[^\s]	a\Sc	abc
\w	单词字符：[A-Za-z0-9]	a\wc	abc
\W	非单词字符：[^\w]	a\Wc	a c
```
##### 数量词
```
*	匹配前一个字符 0 或无限次	abc*	ab 或 abccc
+	匹配前一个字符 1 次或无限次	abc+	abc 或 abccc
?	匹配前一个字符 0 次或 1 次	abc?	ab 或 abc
{m}	匹配前一个字符 m 次	ab{2}c	abbc
{m,n}	匹配前一个字符 m 至 n 次，m 和 n 可以省略，若省略 m，则匹配 0 至 n 次；
        若省略 n，则匹配 m 至无限次
```
##### 边界匹配
```
^	匹配字符串开头，在多行模式中匹配每一行的开头	^abc	abc
$	匹配字符串末尾，在多行模式中匹配每一行的末尾	abc$	abc
\A	仅匹配字符串开头	\Aabc	abc
\Z	仅匹配字符串末尾	abc\Z	abc
\b	匹配 \w 和 \W 之间	a\b!bc	a!bc
\B	[^\b]	a\Bbc	abc
```
##### 逻辑和分组
```
|	| 代表左右表达式任意匹配一个，优先匹配左边的表达式	abc|def	abc 或 def
(...)	括起来的表达式将作为分组，分组将作为一个整体，可以后接数量词	(abc){2}	abcabc
(?P<name>...)	分组，功能与 (...) 相同，但会指定一个额外的别名	(?P<id>abc){2}	abcabc
\<number>	引用编号为 <number> 的分组匹配到的字符串	(\d)abc\1	1abe1 或 5abc5
(?P=name)	引用别名为 <name> 的分组匹配到的字符串	(?P<id>\d)abc(?P=id)	1abe1 或 5abc5
```
##### 特殊构造
```
(?:...)	(…) 的不分组版本，用于使用 "|" 或后接数量词	(?:abc){2}	abcabc
(?iLmsux)	iLmsux 中的每个字符代表一种匹配模式，只能用在正则表达式的开头，可选多个	(?i)abc	AbC
(?#...)	# 后的内容将作为注释被忽略。	abc(?#comment)123 	abc123
(?=...)	之后的字符串内容需要匹配表达式才能成功匹配	a(?=\d)	后面是数字的 a
(?!...)	之后的字符串内容需要不匹配表达式才能成功匹配	a(?!\d)	后面不是数字的 a
(?<=...)	之前的字符串内容需要匹配表达式才能成功匹配	(?<=\d)a	前面是数字的a
(?<!...)	之前的字符串内容需要不匹配表达式才能成功匹配	(?<!\d)a	前面不是数字的a
```
source: http://c.biancheng.net/view/5124.html
## Tips
IDEA函数返回值自动补全 option+command+v